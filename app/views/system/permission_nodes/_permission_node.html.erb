<tr id="<%= dom_id permission_node %>" data-controller="tree" data-tree-depth="<%= depth %>">
  <td class="ledger-content">
    <div>
      <div class="grid grid-cols-5 gap-0 items-center">
        <span class="col-span-3 overflow-hidden text-ellipsis whitespace-nowrap cursor-pointer
        flex items-center"
              data-action="click->tree#toggle">
          <% if permission_node.permission_nodes_count.positive? %>
            <span data-tree-target="icon" class="inline-block" style="padding-left: <%= depth * 30 %>px;">
              <% if permission_node.children.present? %>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                     stroke-linejoin="round"
                     class="lucide lucide-chevron-right-icon lucide-chevron-right [&>*]:data-[tree-depth]:pl-[calc(var(--depth)*30px)]">
                  <path d="m9 18 6-6-6-6"/>
                </svg>
              <% end %>
            </span>
          <% else %>
            <span class="inline-block w-6" style="padding-left: <%= depth * 30 %>px;"></span>
          <% end %>
          <span class="pl-1"><%= permission_node.name %></span>
        </span>
        <span class="col-span-1"><%= permission_node.path %></span>
        <span class="col-span-1">
          <%= link_to "View", permission_node, class: "btn btn-primary" %>
        </span>
      </div>
    </div>

    <% if permission_node.permission_nodes_count.positive? %>
      <div class="hidden" style=" margin-bottom: -0.6rem; margin-top: 0.6rem;"
           data-tree-target="children">
        <table class="table-auto w-full m-0 p-0" id="sub_accounts_table">
          <tbody>
          <% permission_node.children.each do |child| %>
            <%= render partial: 'settings/system/permission_nodes/permission_node', locals: { permission_node: child,
                                                                                              depth: depth + 1.2 } %>
          <% end %>
          </tbody>
        </table>
      </div>
    <% end %>
  </td>
</tr>